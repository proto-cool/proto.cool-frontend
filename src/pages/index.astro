---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Hero from "@/components/hero/Hero.astro";
import SiteConfig from "@/site.config";
import Card from "@components/core/Card.astro";
import TagCloud from "@components/blog/tags/TagCloud.astro";
import PostOverview from "@components/blog/PostOverview.astro";
import Button from "@components/core/Button.astro";

import { getNPosts } from "@lib/payload/utils";

const posts = await getNPosts(5);
---

<BaseLayout title={SiteConfig.title} description={SiteConfig.description}>
    <Hero />
    <section class="mt-24 w-full lg:grid lg:grid-cols-3 gap-8">
        <div
            class:list={[
                "text-base-content text-base",
                "lg:col-span-2 lg:col-start-1",
                "flex flex-col items-start",
            ]}
        >
            <h2 class="h2 pb-4">
                recent blog <span class="text-theme-color-primary">posts</span>
            </h2>
            <div
                class="flex flex-col gap-12 mt-8 border-l-0 lg:border-l-2 border-theme-bg-tertiary pl-0 lg:pl-4"
            >
                {posts.map((post) => <PostOverview post={post} />)}
            </div>
            <Button variant="secondary" arrow="right" href="/blog/1/" class="mt-8 lg:mt-12"
                >see more blog posts</Button
            >
        </div>

        <!--Tag content & sidebar-->
        <aside class="col-span-3 mt-8 lg:col-span-1 lg:mt-0 flex flex-col gap-8">
            <Card
                title="featured"
                icon={`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-theme-color-primary"><path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" /></svg>`}
                class="bg-theme-bg-secondary border border-theme-bg-tertiary"
            >
                <p class="text-sm description">coming soon &mdash; ðŸ‘·ðŸš§</p>
                <Button variant="primary" arrow="right" href="/blog/1/" prefetch class="w-fit"
                    >see more</Button
                >
            </Card>
            <Card
                title="post tags"
                icon={`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 text-theme-color-primary"><path fill-rule="evenodd" d="M5.25 2.25a3 3 0 0 0-3 3v4.318a3 3 0 0 0 .879 2.121l9.58 9.581c.92.92 2.39.92 3.31 0l4.318-4.317a2.341 2.341 0 0 0 0-3.31l-9.581-9.58a3 3 0 0 0-2.121-.879H5.25ZM6.5 7.5a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z" clip-rule="evenodd" /></svg>`}
                class="sticky top-32 w-full bg-transparent border border-theme-bg-tertiary"
            >
                <TagCloud showCount={true} />
            </Card>
        </aside>
    </section>
</BaseLayout>
